# Broker

[[controlled-shutdown]]
## Controlled Shutdown

When a broker is being shutdown in a controlled way (e.g. with `Ctrl+C` or `kill`) it sends a `ControlledShutdownRequest` to the controller.

The controller will then handle the election of a new leader for all the partitions that the broker was leading (partition state machine). For all the partitions the broker was following the controller sends a `StopReplicaRequest` back to the shutting down broker, and updates the ISR in ZK (replica state machine).

## Fetch

**fetch sessions**

**partition fairness in fetch requests**